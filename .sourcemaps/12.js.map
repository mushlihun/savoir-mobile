{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACa;AACN;AAEV;AActC;IAAA;IAAgC,CAAC;IAApB,gBAAgB;QAZ5B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAU;aACX;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;gBACpC,4EAAe,CAAC,QAAQ,EAAE;aAC3B;YACD,OAAO,EAAE;gBACP,2DAAU;aACX;SACF,CAAC;OACW,gBAAgB,CAAI;IAAD,uBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;AClBa;AACa;AACQ;AAEd;AACb;AAOpC;IAiBE,oBAAmB,OAAsB,EAChC,IAAU,EACV,SAA0B,EAC1B,gBAAkC;QAH3C,iBAYC;QAZkB,YAAO,GAAP,OAAO,CAAe;QAChC,SAAI,GAAJ,IAAI,CAAM;QACV,cAAS,GAAT,SAAS,CAAiB;QAC1B,qBAAgB,GAAhB,gBAAgB,CAAkB;QAnB3C,yCAAyC;QACzC,YAAO,GAA6G;YAClH,KAAK,EAAE,EAAE;YACT,KAAK,EAAE,EAAE;YACT,SAAS,EAAE,EAAE;YACb,QAAQ,EAAE,EAAE;YACZ,QAAQ,EAAE,EAAE;YACZ,OAAO,EAAE,IAAI;SACd,CAAC;QAaA,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,gBAAgB;YACzD,qBAAqB,EAAE,wBAAwB,CAAC,CAAC,CAAC,SAAS,CAAC,UAAC,MAAM;YACnE,KAAI,CAAC,iBAAiB,GAAG,MAAM,CAAC,YAAY,CAAC;YAC7C,KAAI,CAAC,mBAAmB,GAAG,MAAM,CAAC,cAAc,CAAC;YACjD,KAAI,CAAC,iBAAiB,GAAG,MAAM,CAAC,mBAAmB,CAAC;YACpD,KAAI,CAAC,oBAAoB,GAAG,MAAM,CAAC,sBAAsB,CAAC;QAC5D,CAAC,CAAC;IACJ,CAAC;IAED,6BAAQ,GAAR;QAAA,iBA6BC;QA5BC,6BAA6B;QAC7B,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;QACxC,+CAA+C;QAC/C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC;YACvC,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBAChC,OAAO,EAAE,KAAI,CAAC,mBAAmB;gBACjC,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE,KAAK;aAChB,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;YAChB,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,wDAAQ,CAAC,CAAC;QAC9B,CAAC,EAAE,UAAC,QAAQ;YACV,oBAAoB;YACpB,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YACzC,IAAI,YAAY,GAAG,KAAI,CAAC,iBAAiB,CAAC;YAC1C,IAAI,QAAQ,CAAC,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;gBAChE,YAAY,GAAG,KAAI,CAAC,iBAAiB,CAAC;aACzC;iBAAM,IAAI,QAAQ,CAAC,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,OAAO,KAAK,kBAAkB;mBACnE,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,UAAU,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,KAAK,MAAM,EAAE;gBACzF,YAAY,GAAG,KAAI,CAAC,oBAAoB,CAAC;aAC5C;YACD,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBAC9B,OAAO,EAAE,YAAY;gBACrB,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE,QAAQ;aACrB,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC,CAAC,CAAC;IACL,CAAC;IA5DU,UAAU;QAJtB,gEAAS,CAAC;YACT,QAAQ,EAAE,aAAa;WACG;SAC3B,CAAC;+EAkByC;YAC1B,sEAAI;YACC,6EAAe;YACR,OAAgB;OApBhC,UAAU,CA6DtB;IAAD,CAAC;AAAA;SA7DY,UAAU,e","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { SignupPage } from './signup';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SignupPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SignupPage),\r\n    TranslateModule.forChild()\r\n  ],\r\n  exports: [\r\n    SignupPage\r\n  ]\r\n})\r\nexport class SignupPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Component } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { IonicPage, NavController, ToastController } from 'ionic-angular';\r\n\r\nimport { User } from '../../providers/providers';\r\nimport { MainPage } from '../pages';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-signup',\r\n  templateUrl: 'signup.html'\r\n})\r\nexport class SignupPage {\r\n  // The account fields for the signup form\r\n  account: { login: string, email: string, firstName: string, lastName: string, password: string, langKey: string } = {\r\n    login: '',\r\n    email: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    password: '',\r\n    langKey: 'en'\r\n  };\r\n\r\n  // Our translated text strings\r\n  private signupErrorString: string;\r\n  private signupSuccessString: string;\r\n  private existingUserError: string;\r\n  private invalidPasswordError: string;\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public user: User,\r\n    public toastCtrl: ToastController,\r\n    public translateService: TranslateService) {\r\n\r\n    this.translateService.get(['SIGNUP_ERROR', 'SIGNUP_SUCCESS',\r\n      'EXISTING_USER_ERROR', 'INVALID_PASSWORD_ERROR']).subscribe((values) => {\r\n      this.signupErrorString = values.SIGNUP_ERROR;\r\n      this.signupSuccessString = values.SIGNUP_SUCCESS;\r\n      this.existingUserError = values.EXISTING_USER_ERROR;\r\n      this.invalidPasswordError = values.INVALID_PASSWORD_ERROR;\r\n    })\r\n  }\r\n\r\n  doSignup() {\r\n    // set login to same as email\r\n    this.account.login = this.account.email;\r\n    // Attempt to login in through our User service\r\n    this.user.signup(this.account).subscribe(() => {\r\n      let toast = this.toastCtrl.create({\r\n        message: this.signupSuccessString,\r\n        duration: 3000,\r\n        position: 'top'\r\n      });\r\n      toast.present();\r\n      this.navCtrl.push(MainPage);\r\n    }, (response) => {\r\n      // Unable to sign up\r\n      const error = JSON.parse(response.error);\r\n      let displayError = this.signupErrorString;\r\n      if (response.status === 400 && error.type.includes('already-used')) {\r\n          displayError = this.existingUserError;\r\n      } else if (response.status === 400 && error.message === 'error.validation'\r\n          && error.fieldErrors[0].field === 'password' && error.fieldErrors[0].message === 'Size') {\r\n          displayError = this.invalidPasswordError;\r\n      }\r\n      let toast = this.toastCtrl.create({\r\n          message: displayError,\r\n          duration: 3000,\r\n          position: 'middle'\r\n      });\r\n      toast.present();\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}